# 业务字段映射表

## 说明
本文档定义了前端Mock数据字段、业务字段与数据库/API字段的映射关系，确保数据对接时的一致性。

---

## 一、基本信息模块

| 业务意义 | 前端字段名 | 数据库/API字段 | Mock数据当前值 | 数据类型 | 备注 |
|---------|-----------|---------------|---------------|---------|------|
| 报告日期 | `date` | `report_date` | "2023.10.24" | string | 格式：YYYY.MM.DD |
| 学生姓名 | `studentName` | `student_name` | "李明" | string | 显示在报告头部 |
| 阅读篇数 | `articlesCount` | `articles_count` | 2 | number | 今日阅读的文章数量 |
| 阅读字数 | `wordsRead` | `words_read` | 450 | number | 累计阅读的单词数 |
| 专注时长 | `focusDuration` | `focus_duration` | 18 | number | 单位：分钟 |
| 正确率 | `accuracy` | `accuracy_rate` | 85 | number | 单位：百分比（0-100） |

---

## 二、主题护照模块

| 业务意义 | 前端字段名 | 数据库/API字段 | Mock数据当前值 | 数据类型 | 备注 |
|---------|-----------|---------------|---------------|---------|------|
| 封面图片 | `subjectPassport.coverImage` | `cover_image_url` | "https://picsum.photos/600/340" | string | 图片URL |
| 文章标题 | `subjectPassport.articleTitle` | `article_title` | "Susan and Her Cat" | string | 英文标题 |
| 单元进度 | `subjectPassport.unitProgress` | `unit_progress` | "1/4" | string | 格式：当前/总数 |
| 单元总数 | `subjectPassport.unitTotal` | `unit_total` | 4 | number | 总单元数 |
| 主题 | `subjectPassport.theme` | `theme` | "人与自然" | string | 枚举值，见配置 |
| 体裁 | `subjectPassport.genre` | `genre` | "记叙文" | string | 枚举值，见配置 |

---

## 三、能力分数模块

| 业务意义 | 前端字段名 | 数据库/API字段 | Mock数据当前值 | 数据类型 | 备注 |
|---------|-----------|---------------|---------------|---------|------|
| 精准定位分数 | `abilityScores.precisePositioning` | `ability_precise_positioning` | 85 | number | 0-100分 |
| 逻辑推演分数 | `abilityScores.logicalDeduction` | `ability_logical_deduction` | 70 | number | 0-100分 |
| 宏观结构分数 | `abilityScores.macroStructure` | `ability_macro_structure` | 60 | number | 0-100分 |
| 语境解码分数 | `abilityScores.contextualDecoding` | `ability_contextual_decoding` | 90 | number | 0-100分 |
| 策略执行分数 | `abilityScores.strategyExecution` | `ability_strategy_execution` | 75 | number | 0-100分 |

**前端显示格式转换：**
- 前端使用 `abilityMetrics` 数组，包含 `label`（中文标签）、`score`（分数）、`color`（颜色主题）
- 转换函数：`utils/dataConverter.ts` 中的 `convertLessonToStudentData()`

---

## 四、技能卡模块

| 业务意义 | 前端字段名 | 数据库/API字段 | Mock数据当前值 | 数据类型 | 备注 |
|---------|-----------|---------------|---------------|---------|------|
| 技能卡标题 | `skillCards[].title` | `skill_card_title` | "GPS定位卡" | string | 技能卡名称 |
| 技能卡等级 | `skillCards[].level` | `skill_card_level` | "LV.3" | string | 格式：LV.数字 |
| 当前进度 | `skillCards[].progress` | `skill_card_progress` | 65 | number | 0-100 |
| 总进度 | `skillCards[].total` | `skill_card_total` | 100 | number | 通常为100 |
| 状态 | `skillCards[].status` | `skill_card_status` | "active" | string | active/locked |
| 简短描述 | `skillCards[].desc` | `skill_card_desc` | "精准定位" | string | 简短说明 |
| 完整描述 | `skillCards[].fullDesc` | `skill_card_full_desc` | "GPS定位卡帮助你..." | string | 详细说明 |
| 适用题型 | `skillCards[].questionTypes` | `skill_card_question_types` | ["细节理解题", ...] | array<string> | 题型数组 |
| 使用技巧 | `skillCards[].tips` | `skill_card_tips` | "阅读题目后..." | string | 使用建议 |
| 当前等级（数字） | `skillCards[].stats.level` | `skill_card_stats_level` | 3 | number | 仅active时 |
| 累计经验 | `skillCards[].stats.exp` | `skill_card_stats_exp` | 650 | number | 仅active时 |
| 使用次数 | `skillCards[].stats.usage` | `skill_card_stats_usage` | 12 | number | 仅active时 |
| 解锁条件 | `skillCards[].unlockCondition` | `skill_card_unlock_condition` | "完成更多..." | string | 仅locked时 |

---

## 五、生词模块

| 业务意义 | 前端字段名 | 数据库/API字段 | Mock数据当前值 | 数据类型 | 备注 |
|---------|-----------|---------------|---------------|---------|------|
| 单词 | `vocabulary[].word` | `vocab_word` | "scarf" | string | 英文单词 |
| 词性 | `vocabulary[].partOfSpeech` | `vocab_part_of_speech` | "n. 围巾" | string | 格式：词性. 中文 |
| 中文意思 | `vocabulary[].meaning` | `vocab_meaning` | "围巾" | string | 中文释义 |
| 状态 | `vocabulary[].status` | `vocab_status` | "mastered" | string | mastered/review |
| 语境例句 | `vocabulary[].context` | `vocab_context` | "Susan bought..." | string | 包含该词的句子 |
| 来源文章 | `vocabulary[].sourceTitle` | `vocab_source_title` | "The Fashion Story" | string | 文章标题 |
| 复习次数 | `vocabulary[].reviewCount` | `vocab_review_count` | 2 | number | 仅review时，默认1 |

**前端显示字段：**
- 学生端使用 `vocabList`
- 教师端使用 `vocabulary`

---

## 六、难句模块

| 业务意义 | 前端字段名 | 数据库/API字段 | Mock数据当前值 | 数据类型 | 备注 |
|---------|-----------|---------------|---------------|---------|------|
| 句子原文 | `sentences[].text` | `sentence_text` | "The rapid transition..." | string | 英文原句 |
| 难度等级 | `sentences[].difficulty` | `sentence_difficulty` | "hard" | string | easy/medium/hard |
| 参考译文 | `sentences[].translation` | `sentence_translation` | "向可再生能源..." | string | 中文翻译 |
| 深度解析 | `sentences[].analysis` | `sentence_analysis` | "这是一个并列结构..." | string | 语法分析 |
| 关键知识点 | `sentences[].keyPoints` | `sentence_key_points` | ["not just...but...", ...] | array<string> | 知识点列表 |
| 来源文章 | `sentences[].sourceTitle` | `sentence_source_title` | "Green Energy Future" | string | 文章标题 |

**前端显示字段：**
- 学生端使用 `sentenceList`
- 教师端使用 `sentences`

---

## 七、周期对比模块

| 业务意义 | 前端字段名 | 数据库/API字段 | Mock数据当前值 | 数据类型 | 备注 |
|---------|-----------|---------------|---------------|---------|------|
| 指标名称 | `periodComparison.week[].label` | `metric_label` | "阅读篇数" | string | 指标中文名 |
| 当前值 | `periodComparison.week[].value` | `metric_current_value` | 14 | number/string | 可以是数字或字符串（如"3.2k"） |
| 单位 | `periodComparison.week[].unit` | `metric_unit` | "篇" | string | 单位 |
| 变化率 | `periodComparison.week[].change` | `metric_change_rate` | 40.0 | number | 百分比，正数表示上升 |
| 上期值 | `periodComparison.week[].prevValue` | `metric_previous_value` | 10 | number/string | 上期数值 |
| 差值 | `periodComparison.week[].diff` | `metric_diff` | 4 | number | 绝对差值 |
| 颜色反转 | `periodComparison.week[].reverseColor` | `metric_reverse_color` | true | boolean | true表示越低越好（如盲猜率） |

**周期类型：**
- `week`: 本周与上周对比
- `month`: 本月与上月对比

**指标列表：**
- 阅读篇数
- 阅读字数
- 专注时长
- 答题正确率
- 盲猜率（reverseColor: true）
- 新掌握词汇

---

## 八、趋势数据模块

| 业务意义 | 前端字段名 | 数据库/API字段 | Mock数据当前值 | 数据类型 | 备注 |
|---------|-----------|---------------|---------------|---------|------|
| 当前盲猜率 | `trends.guessRate.current` | `guess_rate_current` | 5 | number | 百分比（0-100） |
| 变化率 | `trends.guessRate.change` | `guess_rate_change` | -58.3 | number | 百分比，负数表示下降 |
| 日期 | `trends.guessRate.data[].day` | `trend_data_day` | "周二" | string | 日期标识 |
| 盲猜率值 | `trends.guessRate.data[].value` | `trend_data_value` | 40 | number | 百分比（0-100） |

**注意：**
- 阅读速度趋势已移除，仅保留盲猜率趋势
- 前端使用 `guessRateTrend` 字段

---

## 九、今日训练目标模块

| 业务意义 | 前端字段名 | 数据库/API字段 | Mock数据当前值 | 数据类型 | 备注 |
|---------|-----------|---------------|---------------|---------|------|
| 题型名称 | `trainingGoals[].type` | `training_goal_type` | "细节理解题" | string | 枚举值，见配置 |
| 目标数量 | `trainingGoals[].count` | `training_goal_count` | 2 | number | 目标完成数量 |
| 颜色主题 | `trainingGoals[].color` | `training_goal_color` | "blue" | string | blue/purple/green/orange |

**注意：**
- 此模块仅在教师端显示
- 学生端不显示训练目标

---

## 十、学生信息模块

| 业务意义 | 前端字段名 | 数据库/API字段 | Mock数据当前值 | 数据类型 | 备注 |
|---------|-----------|---------------|---------------|---------|------|
| 学生ID | `student.id` | `student_id` | "1001" | string | 唯一标识 |
| 学生姓名 | `student.name` | `student_name` | "李明" | string | 显示名称 |
| 学习等级 | `student.level` | `student_level` | "S9 进阶阅读计划" | string | 可选字段 |

---

## 数据转换说明

### 教师端 → 学生端转换

**转换函数：** `utils/dataConverter.ts` → `convertLessonToStudentData()`

**字段映射：**
- `lesson.vocabulary` → `vocabList`
- `lesson.sentences` → `sentenceList`
- `lesson.skillCards` → `skillCards`
- `lesson.periodComparison` → `periodData`
- `lesson.abilityScores` → `abilityMetrics` (转换格式)
- `lesson.trends.guessRate` → `guessRateTrend`
- `lesson.date` → `date`
- `student.name` → `studentName`
- `lesson.articlesCount` → `articlesCount`
- `lesson.wordsRead` → `wordsRead`
- `lesson.focusDuration` → `focusDuration`
- `lesson.subjectPassport` → `subjectPassport`
- `lesson.trainingGoals` → `trainingGoals`

---

## 枚举值定义

### 状态枚举
- **技能卡状态：** `active`（已解锁）、`locked`（已锁定）
- **生词状态：** `mastered`（已掌握）、`review`（需复习）
- **难句难度：** `easy`（简单）、`medium`（中等）、`hard`（困难）

### 主题枚举
见 `config/constants.ts` → `THEME_OPTIONS`

### 体裁枚举
见 `config/constants.ts` → `GENRE_OPTIONS`

### 题型枚举
见 `config/constants.ts` → `QUESTION_TYPE_OPTIONS`

---

## 注意事项

1. **数据类型一致性：** 确保数据库字段类型与前端类型匹配
2. **必填字段：** 标记为 `required: true` 的字段必须提供
3. **可选字段：** 标记为 `required: false` 的字段可以为空或undefined
4. **数组字段：** 确保数组格式正确，空数组使用 `[]`
5. **日期格式：** 统一使用 `YYYY.MM.DD` 格式
6. **百分比字段：** 存储为数字（0-100），显示时添加 `%` 符号
7. **颜色主题：** 使用预定义的颜色值，不要自定义

---

## 字段确认清单

- [x] 基本信息字段已确认
- [x] 主题护照字段已确认
- [x] 能力分数字段已确认
- [x] 技能卡字段已确认
- [x] 生词字段已确认
- [x] 难句字段已确认
- [x] 周期对比字段已确认
- [x] 趋势数据字段已确认
- [x] 训练目标字段已确认
- [x] 学生信息字段已确认

---

**最后更新时间：** 2024-01-XX
**维护人员：** 开发团队
**版本：** 1.0

