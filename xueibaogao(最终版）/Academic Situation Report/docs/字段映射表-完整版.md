# 前端-后端-业务字段映射表

## 文档说明
- **用途**：明确前端字段、后端API字段、业务含义的对应关系
- **维护**：任何字段变更必须同步更新此文档
- **版本**：v1.0 | 更新日期：2025-12-16

---

## 一、学生信息（StudentInfo）

| 业务含义 | 前端字段 | 后端API字段 | 数据类型 | 示例值 | 必填 | 备注 |
|---------|---------|------------|---------|--------|------|------|
| 学生ID | `id` | `student_id` | string | "1001" | ✅ | 唯一标识 |
| 学生姓名 | `name` | `student_name` | string | "李明" | ✅ | 中文姓名 |
| 年级 | `grade` | `grade_level` | string | "初一" | ✅ | 年级信息 |
| 班级 | `class` | `class_name` | string | "1班" | ❌ | 可选 |
| 入学日期 | `enrollmentDate` | `enrollment_date` | string | "2023-09-01" | ❌ | YYYY-MM-DD |

---

## 二、课程记录（LessonRecord）

### 2.1 基础信息

| 业务含义 | 前端字段 | 后端API字段 | 数据类型 | 示例值 | 必填 | 备注 |
|---------|---------|------------|---------|--------|------|------|
| 课程ID | `id` | `lesson_id` | string | "lesson_20231024" | ✅ | 唯一标识 |
| 上课日期 | `date` | `lesson_date` | string | "2023.10.24" | ✅ | YYYY.MM.DD格式 |
| 所属单元 | `unit` | `unit_name` | string | "Unit 1" | ✅ | 单元名称 |
| 单元进度 | `unitProgress` | `unit_progress` | string | "1/4" | ✅ | 当前/总数 |

### 2.2 学习数据

| 业务含义 | 前端字段 | 后端API字段 | 数据类型 | 示例值 | 必填 | 备注 |
|---------|---------|------------|---------|--------|------|------|
| 阅读篇数 | `articlesCount` | `articles_count` | number | 2 | ✅ | 完成的文章数量 |
| 阅读字数 | `wordsRead` | `words_read` | number | 450 | ✅ | 总阅读字数 |
| 专注时长（分钟） | `focusDuration` | `focus_duration_min` | number | 18 | ✅ | 有效学习时间 |
| 阅读速度（WPM） | `readingSpeed` | `reading_speed_wpm` | number | 156 | ✅ | 每分钟词数 |
| 理解准确率（%） | `comprehensionRate` | `comprehension_rate` | number | 95 | ✅ | 0-100 |

---

## 三、生词数据（VocabData）

| 业务含义 | 前端字段 | 后端API字段 | 数据类型 | 示例值 | 必填 | 备注 |
|---------|---------|------------|---------|--------|------|------|
| 单词 | `word` | `vocabulary_word` | string | "court" | ✅ | 英文单词 |
| 翻译 | `translation` | `word_translation` | string | "法院；球场" | ✅ | 中文释义 |
| 掌握状态 | `status` | `mastery_status` | enum | "mastered" | ✅ | mastered/review |
| 复习次数 | `reviewCount` | `review_count` | number | 2 | ✅ | 回炉次数 |
| 掌握分数 | `masteryScore` | `mastery_score` | number | 40 | ❌ | 0-100分 |
| 音标 | `phonetic` | `phonetic_symbol` | string | "/kɔːt/" | ❌ | 可选 |
| 例句 | `example` | `example_sentence` | string | "..." | ❌ | 可选 |

**状态枚举说明：**
- `mastered`: 已掌握（秒杀）
- `review`: 需复习（回炉）

---

## 四、句子数据（SentenceData）

| 业务含义 | 前端字段 | 后端API字段 | 数据类型 | 示例值 | 必填 | 备注 |
|---------|---------|------------|---------|--------|------|------|
| 句子内容 | `text` | `sentence_text` | string | "Although..." | ✅ | 英文句子 |
| 中文翻译 | `translation` | `sentence_translation` | string | "虽然..." | ✅ | 中文翻译 |
| 难度等级 | `difficulty` | `difficulty_level` | enum | "hard" | ✅ | easy/medium/hard |
| 句子分析 | `analysis` | `sentence_analysis` | string | "..." | ❌ | 语法分析 |

**难度枚举说明：**
- `easy`: 简单
- `medium`: 中等
- `hard`: 困难

---

## 五、技能卡数据（SkillCard）

| 业务含义 | 前端字段 | 后端API字段 | 数据类型 | 示例值 | 必填 | 备注 |
|---------|---------|------------|---------|--------|------|------|
| 技能名称 | `name` | `skill_name` | string | "细节侦探卡" | ✅ | 技能卡名称 |
| 技能描述 | `description` | `skill_description` | string | "..." | ✅ | 详细说明 |
| 激活状态 | `status` | `skill_status` | enum | "active" | ✅ | active/locked |
| 当前进度 | `progress` | `current_progress` | number | 8 | ✅ | 已完成数 |
| 总进度 | `total` | `total_progress` | number | 10 | ✅ | 总需完成数 |
| 技能类型 | `category` | `skill_category` | string | "A" | ✅ | A/B/C/D分类 |
| 图标 | `icon` | `skill_icon` | string | "/icon.png" | ❌ | 图标路径 |

**状态枚举说明：**
- `active`: 已激活（已解锁）
- `locked`: 未激活（待解锁）

---

## 六、训练目标（TrainingGoal）

| 业务含义 | 前端字段 | 后端API字段 | 数据类型 | 示例值 | 必填 | 备注 |
|---------|---------|------------|---------|--------|------|------|
| 目标类型 | `type` | `goal_type` | string | "细节理解题" | ✅ | 题型名称 |
| 目标数量 | `count` | `goal_count` | number | 3 | ✅ | 篇数 |
| 颜色主题 | `color` | `theme_color` | enum | "blue" | ✅ | blue/yellow |

**颜色枚举说明：**
- `blue`: 蓝色主题
- `yellow`: 黄色主题

---

## 七、能力分数（AbilityScores）

| 业务含义 | 前端字段 | 后端API字段 | 数据类型 | 示例值 | 必填 | 备注 |
|---------|---------|------------|---------|--------|------|------|
| 精准定位力 | `precisePositioning` | `search_power` | number | 85 | ✅ | 0-100分 |
| 逻辑推演力 | `logicalDeduction` | `logic_power` | number | 70 | ✅ | 0-100分 |
| 宏观结构力 | `structureAnalysis` | `structure_power` | number | 60 | ✅ | 0-100分 |
| 语境解码力 | `contextualDecoding` | `decoding_power` | number | 90 | ✅ | 0-100分 |
| 策略执行力 | `strategyExecution` | `strategy_power` | number | 75 | ✅ | 0-100分 |

---

## 八、主题护照（SubjectPassport）

| 业务含义 | 前端字段 | 后端API字段 | 数据类型 | 示例值 | 必填 | 备注 |
|---------|---------|------------|---------|--------|------|------|
| 封面图片 | `coverImage` | `cover_image_url` | string | "/image.png" | ✅ | 图片路径 |
| 文章标题 | `articleTitle` | `article_title` | string | "Susan and Her Cat" | ✅ | 英文标题 |
| 单元进度 | `unitProgress` | `unit_progress` | string | "1/4" | ✅ | 当前/总数 |
| 单元总数 | `unitTotal` | `unit_total` | number | 4 | ✅ | 总单元数 |
| 核心题材 | `theme` | `core_theme` | string | "人与自然" | ✅ | 主题分类 |
| 文章体裁 | `genre` | `article_genre` | string | "记叙文" | ✅ | 体裁类型 |

---

## 九、趋势数据（TrendData）

### 9.1 查词率趋势

| 业务含义 | 前端字段 | 后端API字段 | 数据类型 | 示例值 | 必填 | 备注 |
|---------|---------|------------|---------|--------|------|------|
| 当前查词率 | `guessRate.current` | `lookup_rate_current` | number | 5 | ✅ | 百分比 |
| 变化值 | `guessRate.change` | `lookup_rate_change` | number | -58 | ✅ | 正负百分比 |
| 历史数据 | `guessRate.data` | `lookup_rate_history` | array | [...] | ✅ | 趋势数组 |

### 9.2 历史数据点

| 业务含义 | 前端字段 | 后端API字段 | 数据类型 | 示例值 | 必填 | 备注 |
|---------|---------|------------|---------|--------|------|------|
| 日期 | `date` | `trend_date` | string | "10/15" | ✅ | MM/DD格式 |
| 数值 | `value` | `trend_value` | number | 15 | ✅ | 具体数值 |

---

## 十、周期对比数据（PeriodComparisonData）

| 业务含义 | 前端字段 | 后端API字段 | 数据类型 | 示例值 | 必填 | 备注 |
|---------|---------|------------|---------|--------|------|------|
| 指标名称 | `metric` | `metric_name` | string | "阅读篇数" | ✅ | 指标类型 |
| 当前值 | `current` | `current_value` | number | 14 | ✅ | 本期数值 |
| 上期值 | `previous` | `previous_value` | number | 10 | ✅ | 上期数值 |
| 变化率 | `change` | `change_rate` | number | 40 | ✅ | 百分比（+/-） |
| 趋势方向 | `trend` | `trend_direction` | enum | "up" | ✅ | up/down/stable |

**趋势枚举说明：**
- `up`: 上升（增长）
- `down`: 下降（降低）
- `stable`: 持平（无变化）

---

## 十一、报告生成相关

### 11.1 报告链接

| 业务含义 | 前端字段 | 后端API字段 | 数据类型 | 示例值 | 必填 | 备注 |
|---------|---------|------------|---------|--------|------|------|
| 报告ID | `reportId` | `report_id` | string | "rep_abc123" | ✅ | 唯一标识 |
| 学生ID | `studentId` | `student_id` | string | "1001" | ✅ | 关联学生 |
| 课程ID | `lessonId` | `lesson_id` | string | "lesson_20231024" | ✅ | 关联课程 |
| 生成时间 | `createdAt` | `created_at` | string | "2023-10-24 15:30:00" | ✅ | 时间戳 |
| 访问链接 | `url` | `report_url` | string | "http://..." | ✅ | 完整URL |

---

## 数据类型说明

### 基本类型
- **string**: 字符串
- **number**: 数字（整数或小数）
- **boolean**: 布尔值（true/false）
- **array**: 数组
- **object**: 对象

### 枚举类型（enum）
枚举类型表示只能取特定的几个值，见各表格中的"枚举说明"。

### 日期时间格式
- 日期：`YYYY.MM.DD` 或 `YYYY-MM-DD`
- 时间：`HH:mm` 或 `HH:mm:ss`
- 日期时间：`YYYY-MM-DD HH:mm:ss`

---

## API接口示例

### 获取学生报告
```
GET /api/v1/students/{student_id}/lessons/{lesson_id}

Response:
{
  "code": 200,
  "message": "success",
  "data": {
    "student_id": "1001",
    "student_name": "李明",
    "lesson_id": "lesson_20231024",
    "lesson_date": "2023-10-24",
    // ... 其他字段
  }
}
```

### 更新课程数据
```
PUT /api/v1/lessons/{lesson_id}

Request:
{
  "articles_count": 2,
  "words_read": 450,
  "focus_duration_min": 18,
  // ... 其他字段
}

Response:
{
  "code": 200,
  "message": "更新成功",
  "data": { /* 更新后的完整数据 */ }
}
```

---

## 更新日志

| 日期 | 版本 | 更新内容 | 更新人 |
|------|------|---------|--------|
| 2025-12-16 | v1.0 | 初始版本，完成所有字段映射 | - |

---

## 注意事项

1. **命名规范**：
   - 前端使用 camelCase（驼峰命名）
   - 后端使用 snake_case（下划线命名）

2. **数据验证**：
   - 所有必填字段必须校验
   - 数字类型需要范围校验（如分数0-100）
   - 枚举类型必须验证值的合法性

3. **错误处理**：
   - 字段缺失时应有默认值
   - 类型不匹配时应有提示
   - API错误应有明确的错误码和消息

4. **性能考虑**：
   - 图片字段只传路径，不传base64
   - 大数组需要分页
   - 历史数据需要限制时间范围

